è®¡ç®—å‡ ä½•ä¸­ç”±ä¸¤ä¸ªç»å…¸æ–¹æ³•ï¼Œä¹Ÿè¢«ç§°ä¸ºæœ€ç»ˆå¥¥ä¹‰ï¼ˆå…¶å®æ˜¯æ²¡åŠæ³•çš„æ—¶å€™æ‰èƒ½ä½¿ç”¨2333ï¼‰â€”â€”æšä¸¾å’Œåˆ†æ²»ã€‚æœ€ç»ˆå¥¥ä¹‰ä¸€èˆ¬æ˜¯åœ¨æ„æˆå‡ ä½•ç‚¹æ•°è¾ƒå°‘å’Œå…¶ä»–ç®—æ³•æ— æ³•æ­£ç¡®è§£å†³çš„æ—¶å€™ä½¿ç”¨ğŸ˜€

### æšä¸¾å’Œè®¡ç®—å‡ ä½•

å…ˆå¼•å…¥ä¸€é“ç»å…¸ä¾‹é¢˜ï¼š

#### [caioj 1211]ç»Ÿè®¡æ­£æ–¹å½¢

> é¢˜ç›®æè¿°
>
> ã€é¢˜ç›®æè¿°ã€‘
>
> ç»™å®šå¹³é¢ä¸ŠNä¸ªç‚¹,ä½ éœ€è¦è®¡ç®—ä»¥å…¶ä¸­4ä¸ªç‚¹ä¸ºé¡¶ç‚¹çš„æ­£æ–¹å½¢çš„ä¸ªæ•°ã€‚æ³¨æ„è¿™é‡Œçš„æ­£æ–¹å½¢è¾¹ä¸ä¸€å®šéœ€è¦å’Œåæ ‡è½´å¹³è¡Œã€‚
>
> ã€è¾“å…¥æ–‡ä»¶ã€‘
>
> ç¬¬ä¸€è¡Œä¸€ä¸ªæ•°N,ä»¥ä¸‹Nä¸ªç‚¹çš„åæ ‡ã€‚
>
> ã€è¾“å‡ºæ–‡ä»¶ã€‘
>
> ä¸€ä¸ªæ•°æ­£æ–¹å½¢çš„ä¸ªæ•°ã€‚
>
> ã€æ ·ä¾‹è¾“å…¥ã€‘
>
> ```
> 7
> 0 0
> 0 1
> 1 0
> 1 1
> 1 2
> 2 1
> 2 2
> ```
>
> ã€æ ·ä¾‹è¾“å‡ºã€‘
>
> ```
> 3
> ```
>
> ã€æ•°æ®è§„æ¨¡ã€‘
> å¯¹äº$20ï¼…$çš„æ•°æ®,æ»¡è¶³ $1â‰¤Nâ‰¤20$ï¼›
> å¯¹äº$100ï¼…$çš„æ•°æ®,æ»¡è¶³ $1â‰¤Nâ‰¤500,-50â‰¤X[i],Y[i]â‰¤50$,ç‚¹ä¸ä¼šé‡å ã€‚

è¿™é“é¢˜ä»ç®—æ³•è§’åº¦çœ‹æ˜¯ä½¿ç”¨ä¸äº†å‰ç§¯å’Œæ—‹è½¬å¡å£³çš„ï¼Œä½†æ³¨æ„åˆ°100%çš„æ•°æ®èŒƒå›´ï¼š$N_{max} = 500$,è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘ç›´æ¥æšä¸¾äº†ã€‚

æˆ‘ä»¬çŸ¥é“å¦‚æœçŸ¥é“äº†æ­£æ–¹å½¢çš„ä»»æ„ä¸¤ç‚¹çš„åæ ‡ï¼Œå°±å¯ä»¥æ¨å‡ºå…¶ä½™ä¸¤ä¸ªç‚¹çš„åæ ‡ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬æšä¸¾æ­£æ–¹å½¢ä¸­é ä¸‹çš„ä¸¤ä¸ªç‚¹åˆ†åˆ«è®¾ä¸º $I(x_i,y_i) å’Œ J(x_j,y_j)$  ï¼ˆè§„å®šå…¶ä¸­ $J$çš„æ¨ªåæ ‡$x_j$ å¤§äº$I$ çš„æ¨ªåæ ‡$x_i$ï¼‰ã€‚

ç„¶åæˆ‘ä»¬ä»¤$X=x_j-x_iï¼›Y=y_j-y_i$ï¼›
æ¥ç€æˆ‘ä»¬å°±å¯ä»¥æ¨å‡ºå‰©ä¸‹ä¸¤ç‚¹åæ ‡ï¼š
$O(x_i-Y,y_i+x)ï¼ŒP(x_j-y,y_j+x)$;åªéœ€è¦ç”¨æ•°ç»„åˆ¤æ–­$Oï¼ŒP$ä¸¤ç‚¹æ˜¯å¦å­˜åœ¨å³å¯ï¼Œè‹¥å­˜åœ¨åˆ™ans++ï¼Œå¦åˆ™ç»§ç»­æšä¸¾ä¸‹ä¸€ä¸ª$Iï¼ŒJ$ã€‚(å¦‚ä¸‹å›¾)

![](https://gitee.com//riotian/blogimage/raw/master/img/20201027200409.png)

æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºåæ ‡å¯èƒ½ä¸ºè´Ÿæ•°ï¼Œä¸ºäº†æ–¹ä¾¿åé¢çš„åˆ¤æ–­ï¼Œéœ€è¦è®©æ¯ä¸ªç‚¹çš„åæ ‡åŠ ä¸Šä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ­£æ•°è®©åæ ‡å…¨éƒ¨å˜ä¸ºæ­£æ•°ï¼ŒACä»£ç å¦‚ä¸‹ï¼š

```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
const int N = 1e3 + 50;
struct node {
    int x, y;
};
vector<node> a(N);
bool f[N][N];//æ ‡è®°ç‚¹çš„å­˜åœ¨
int n, x, y, ans;
int main() {
    // freopen("in.txt", "r", stdin);
    ios::sync_with_stdio(false), cin.tie(0), cout.tie(0);
    cin >> n;
    for (int i = 1; i <= n; ++i) {
        cin >> x >> y;
        a[i].x = x + 500, a[i].y = y + 500;  //é¿å…è´Ÿæ•°çš„å½±å“

        f[a[i].x][a[i].y] = true;
    }

    ans = 0;
    //å¼€å§‹æšä¸¾,å…ˆåºå®šä½ Iï¼ŒJç‚¹ã€‚ç”±åæ ‡æ¨å¯¼æ­£æ–¹å½¢å‰©ä¸‹çš„ä¸¤ä¸ªç‚¹ã€‚å¦‚æœå­˜åœ¨ans++
    for (int i = 1; i <= n; ++i)
        for (int j = 1; j <= n; ++j)
            if (i != j) {
                if (a[i].x < a[j].x && a[i].y <= a[j].y) {
                    int x = a[j].x - a[i].x;
                    int y = a[j].y - a[i].y;

                    if (f[a[i].x - y][a[i].y + x] && f[a[j].x - y][a[j].y + x])
                        ans++;
                }
            }

    cout << ans << endl;
}
```

### åˆ†æ²»ä¸è®¡ç®—å‡ ä½•

åœ¨[ã€è®¡ç®—å‡ ä½• 03ã€‘æ—‹è½¬å¡å£³ç®—æ³•]()çš„é‚£ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ—‹è½¬å¡å£³æ±‚å‡ºäº†å¹³é¢å†…æœ€è¿œç‚¹å¯¹ï¼Œä½†ç°åœ¨é‡æ–°æ¥æ€è€ƒä¸€ä¸‹ï¼šå¦‚ä½•æ±‚æœ€è¿‘ç‚¹å¯¹å‘¢ï¼Ÿ

å°½ç®¡æˆ‘ä»¬èƒ½é€šè¿‡**ç©·ä¸¾**$O(n^2)$ å‡ºç­”æ¡ˆï¼Œä½†è¦æƒ³æ›´ä¼˜åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸å¦¨å…ˆæŠŠé—®é¢˜ç®€åŒ–ï¼Œçœ‹çœ‹åœ¨ä¸€ç»´ä¸Šè¿™ä¸ªé—®é¢˜çš„æ±‚è§£æ–¹æ³•ã€‚

#### ä¸€ç»´å†…çš„æœ€è¿‘ç‚¹å¯¹

æ­¤æ—¶ï¼Œ$n$ä¸ªç‚¹é€€åŒ–ä¸º $xè½´$ ä¸Šçš„ $n$ä¸ªå®æ•° $x_1ï¼Œx_2ï¼Œ...ï¼Œx_n$ ã€‚æœ€æ¥è¿‘ç‚¹å¯¹å³ä¸ºè¿™ $n$ ä¸ªå®æ•°ä¸­ç›¸å·®æœ€å°çš„ä¸¤ä¸ªå®æ•°ã€‚æ˜¾ç„¶å¯ä»¥å…ˆå°†ç‚¹æ’å¥½åºï¼Œç„¶åç”¨ $O(n)$ çº¿æ€§æ‰«æå°±å¯ä»¥äº†ã€‚ä½†ä¸ºäº†ä¾¿äºæ¨å¹¿åˆ°äºŒç»´çš„æƒ…å½¢ï¼Œå°è¯•ç”¨åˆ†æ²»æ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

é¦–å…ˆè‚¯å®šè¦å…ˆå¯¹ç‚¹è¿›è¡Œæ’åºï¼Œæ¥ç€å‡è®¾æˆ‘ä»¬ç”¨ $m$ç‚¹å°† $S(xè½´ç‚¹åºåˆ—) $åˆ†ä¸º $S_1$å’Œ $S_2$ ä¸¤ä¸ªé›†åˆï¼Œè¿™æ ·ä¸€æ¥ï¼Œå¯¹äºæ‰€æœ‰çš„ $p(S_1ä¸­çš„ç‚¹)å’Œ q(S_2ä¸­çš„ç‚¹)$ ï¼Œæœ‰ $p$ å°äº $q$ã€‚

![](https://gitee.com//riotian/blogimage/raw/master/img/20201027201857.png)

æ ¹æ®åˆ†æ²»æ€æƒ³ï¼šå†å¯¹$S_1,S_2$é‡å¤æ“ä½œï¼Œé€’å½’åœ°åœ¨$S_1$å’Œ$S_2$ ä¸Šæ‰¾å‡ºå…¶æœ€è¿‘ç‚¹å¯¹$\{p1,p2\}å’Œ\{q1,q2\}$ï¼Œå¹¶è®¾$d = min(|p1-p2| , |q1-q2| )$

ç”±æ­¤æ˜“çŸ¥ï¼ŒSä¸­æœ€è¿‘ç‚¹å¯¹å¯èƒ½æ˜¯$\{p1,p2\}$ ï¼Œå¯èƒ½æ˜¯ $\{q1,q2\}$ ï¼Œä¹Ÿå¯èƒ½æ˜¯æŸä¸ª $\{q3,p3\}$ ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚

å¦‚æœæ­¤æ—¶æœ€è¿‘ç‚¹å¯¹æ˜¯ $\{q3,p3\}$ï¼Œå³$|p3-q3|$å°äº $d$ ï¼Œåˆ™ $p3$ å’Œ$q3$ ä¸¤è€…ä¸ $m$çš„è·ç¦»éƒ½ä¸è¶…è¿‡$d$ï¼Œä¸”$p3$å’Œ$q3$ä¸€å®šåˆ†åˆ«å‡ºç°åœ¨åŒºé—´$(m-d,d]å’Œ(d,m+d]$ ã€‚æ­¤æ—¶ï¼Œä¸€ç»´æƒ…å½¢ä¸‹çš„æœ€è¿‘ç‚¹å¯¹æ—¶é—´å¤æ‚åº¦ä¸º$O(nlogn)$[^1]ã€‚

#### äºŒç»´å†…çš„æœ€è¿‘ç‚¹å¯¹[^2]

ç°åœ¨å¯ä»¥å¯¹åˆšåˆšä¸€ç»´çš„åšæ³•è¿›è¡Œæ¨å¹¿ï¼Œæˆ‘ä»¬å¯ä»¥é¦–å…ˆå…ˆå¯¹ $x$ åæ ‡è¿›è¡Œæ’åºï¼Œå–å‡ºä¸­ç‚¹ï¼Œç„¶åå¯¹äºå·¦å³ä¸¤è¾¹çš„åŒºåŸŸ $S_1ï¼ŒS_2$ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œé€’å½’åœ°æ±‚å‡ºå·¦å³ä¸¤è¾¹åˆ†åˆ«çš„æœ€è¿‘ç‚¹å¯¹çš„è·ç¦» $d1ï¼Œd2$ï¼Œå¹¶ä¸”ä»¤$d=min(d1,d2)$ ã€‚

![@ å›¾ç‰‡æ¥è‡ªè’Ÿè’»dalao](https://gitee.com//riotian/blogimage/raw/master/img/20201027202534.png)

### å¯¹äºæœ€å¤šå…­ä¸ªèŠ‚ç‚¹çš„è¯æ˜

æˆ‘ä»¬ç»§ç»­ç”¨å›ä¸Šä¸€å¹…å›¾è¿›è¡Œè¯æ˜ï¼›

![@ å›¾ç‰‡æ¥è‡ªè’Ÿè’»dalao](https://gitee.com//riotian/blogimage/raw/master/img/20201027202846.png)

æˆ‘ä»¬çŸ¥é“ï¼Œå·¦å³ä¸¤è¾¹åˆ†åˆ«çš„æœ€è¿‘ç‚¹å¯¹çš„è·ç¦»$d1ï¼Œd2$ï¼Œå¹¶ä¸”ä»¤ $d=min(d1,d2)$ï¼Œä¹Ÿå°±æ˜¯å³è¾¹è¿™ä¸ª$d*2d$çš„çŸ©å½¢ä¸­ï¼Œä»»æ„ä¸¤ç‚¹çš„ä¹‹é—´çš„è·ç¦»éƒ½è¦å¤§äºç­‰äºdã€‚é‚£ä¹ˆæˆ‘ä»¬æƒ³åœ¨è¿™ä¸ª$d*2d$çš„çŸ©å½¢ä¸­æ”¾å°½é‡å¤šçš„ç‚¹ï¼Œä½†å½¼æ­¤ä¹‹é—´è·ç¦»éƒ½è¦å¤§äºç­‰äº$d$ï¼Œæ€ä¹ˆæ”¾å‘¢ï¼Ÿ

![@ å›¾ç‰‡æ¥è‡ªè’Ÿè’»dalao](https://gitee.com//riotian/blogimage/raw/master/img/20201027202954.png)

èªæ˜çš„ä½ ä¸€å®šæƒ³åˆ°äº†ï¼ŒæŒ‰ç…§ä¸Šå›¾çš„çº¢ç‚¹ä½ç½®æ”¾ï¼Œæ˜¯æœ€ä¼˜çš„ç­–ç•¥äº†ã€‚ä½†æ­¤æ—¶æœ€å¤šä¹Ÿå°±åªèƒ½æ”¾ä¸‹å…­ä¸ªç‚¹ã€‚æ‰€ä»¥åŸç»“è®ºæ˜¯æ­£ç¡®çš„ã€‚

### å†æ¥é“æ¨¡æ¿é¢˜

#### [caioj 1206]æœ€è¿‘ç‚¹å¯¹çš„è·ç¦»

> ã€é¢˜æ„ã€‘
>
> ç»™å‡ºnä¸ªç‚¹çš„åæ ‡ï¼Œæ±‚æœ€è¿‘ä¸¤ç‚¹é—´çš„è·ç¦»ã€‚
>
> ã€è¾“å…¥æ ¼å¼ã€‘
>
> ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°n(2 â‰¤ n â‰¤ 50000)ã€‚
>
> ä¸‹æ¥nè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªå®æ•° x å’Œ y è¡¨ç¤ºç‚¹åæ ‡ã€‚
>
> ã€è¾“å‡ºæ ¼å¼ã€‘
>
> ä¸€è¡Œä¸€ä¸ªå®æ•°ï¼Œè¡¨ç¤ºæœ€è¿‘ä¸¤ç‚¹é—´çš„è·ç¦»ï¼ˆä¿ç•™4ä½å°æ•°ï¼‰ã€‚
> ã€æ ·ä¾‹è¾“å…¥ã€‘
>
> ```
> 5
> 0 0
> 0 5
> 5 0
> 5 5
> 2 0
> ```
>
> ã€æ ·ä¾‹è¾“å‡ºã€‘
>
> ```
> 2.0000
> ```
>
> 

ç›´æ¥è´´æ¨¡æ¿äº†ï¼š

```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
const int N = 5e4 + 100;
const int inf = 21474836;
struct node {
    double x, y;
} p[N], f[N];
// vector<node> p(N), f(N);
double ans, Rans, Lans;
int n;

double dis(node x, node y) {
    return (sqrt((x.x - y.x) * (x.x - y.x) + (x.y - y.y) * (x.y - y.y)));
}
// å‡½æ•°é‡æ„
// double min(double x, double y) {
//     if (x < y) return x;
//     return y;
// }
bool cmp(node x, node y) {
    if (x.x < y.x) return true;
    return false;
}

bool cmpp(node x, node y) {
    if (x.y < y.y) return true;
    return false;
}

double close(int left, int right) {
    if (left == right) return inf;
    if (left + 1 == right) return (dis(p[left], p[right]));
    int mid = (left + right) >> 1;
    //åˆ©ç”¨é€’å½’åˆ†åˆ«æ±‚å‡ºå·¦å³ä¸¤è¾¹åŒºåŸŸçš„æœ€è¿‘è·ç¦»
    double d1 = close(left, mid);
    double d2 = close(mid + 1, right);
    double d = min(d1, d2);
    int len = 0;

    for (int i = left; i <= right; ++i)
        if (fabs(p[i].x - p[mid].x) <= d) f[++len] = p[i];

    //é€‰å‡ºmidå·¦å³dçš„æ¡çŠ¶åŒºåŸŸçš„æ‰€æœ‰ç‚¹å¹¶ä¸”æŒ‰ç…§yè½´åæ ‡æ’åº
    sort(f + 1, f + len + 1, cmpp);

    for (int i = 1; i < len; i++) {
        for (int j = i + 1; j <= len; j++)
            if (f[j].y - f[i].y < d) {
                double d3 = dis(f[i], f[j]);
                if (d3 < d) d = d3;
            } else
                break;  //åˆ©ç”¨é¹Šå·¢åŸç†è¿›è¡Œä¼˜åŒ–
    }
    //åˆ¤æ–­æ˜¯å¦æœ‰å°äºdçš„å€¼å­˜åœ¨
    return d;
}

int main() {
    // freopen("in.txt", "r", stdin);
    ios::sync_with_stdio(false), cin.tie(0), cout.tie(0);
    scanf("%d", &n);
    for (int i = 1; i <= n; i++) scanf("%lf%lf", &p[i].x, &p[i].y);
    sort(p + 1, p + n + 1, cmp);  //å¯¹äºxè½´åæ ‡æ’åº

    ans = close(1, n);  //è®¡ç®—ç­”æ¡ˆ

    printf("%0.4lf", ans);
}
```

### ç»“è¯­

é€šè¿‡è¿™ç¯‡åšå®¢ç›¸ä¿¡ä½ ä¸€å®šå·²ç»å­¦ä¼šäº†è®¡ç®—å‡ ä½•çš„æœ€ç»ˆå¥¥ä¹‰ï¼

åŒæ—¶å¦‚æœæœ¬æ–‡ä¸­æœ‰ä»€ä¹ˆé”™è¯¯çš„åœ°æ–¹è¿˜è¯·å¤§ç¥ä»¬æŒ‡å‡ºï¼Œæˆ‘ä¼šç¬¬ä¸€æ—¶é—´ä¿®æ”¹ã€‚



---

[^1]: å…³äºæ—¶é—´å¤æ‚åº¦çš„è¯¦ç»†è¯æ˜å¯ä»¥åœ¨OI wikiä¸ŠæŸ¥çœ‹ [click here](https://github.com/reuixiy/io-oi.me/issues/10)
[^2]: æ¨å¹¿çš„æ€è·¯æ¥è‡ªè’Ÿè’»dalao